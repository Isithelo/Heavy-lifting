<h1 id="name"></h1>

<p id="detail"></p>
<div id="toolbar"></div>
<p></p>
 



<div style="padding-bottom: 15px">

  <div id="detail"></div>
</div>
<div class="row">
  <div id= "groups"></div>
</div>

 
 

<script type="text/javascript">
  var tablelistdata = {{{databaseitems}}};
  var items = {{{menuitem}}}
  var formids = create_uid()
  var templateload = {{{templateload}}}


/////////////////////////////////////
////     HEADINGS AND STUFF     //// 
///////////////////////////////////
$('#name').html(items.name)
$('#detail').html(items.detail)


/////////////////////////////
////     DEBUG AREA     //// 
///////////////////////////
console.log( 'databasetablelist loading' )
console.log( '-------------------------' )
console.log( 'tablelistdata : ',tablelistdata )
console.log( 'items : ',items )
console.log( 'formids : ',formids )
console.log( 'templateload : ',templateload )
console.log( '-------------------------' )
console.log( 'databasetablelist loading' )

//////////////////////////////////////////
////        CREATE UNIQUE ID         //// 
////////////////////////////////////////
function create_uid() {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000)
    .toString(16)
    .substring(1);
  }
  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
  s4() + '-' + s4() + s4() + s4();
}

  $(document).ready(function() { 
    ///////////////////////////////// 
    //////  READ CHILDREN     //////
    /////////////////////////////// 
    jQuery.ajax({
      'async': true,
      'global': false,
      'url': '/groups?data='+items.elementID,
      'success': function (dataSchemaObject) {
        console.log(dataSchemaObject,'consososos')
        input = JSON.parse(dataSchemaObject);
        groupShow(input)
      }
    });
  })

  function groupShow(data) {
    for (var i = 0; i < data.length; i++) {
      $('#groups').append(printImageCatagory(data[i]))
    }
  }

///////////////////////////////// 
//////  PRINT IMAGE       //////
/////////////////////////////// 
function printImageCatagory (data) {
  console.log(data.entry.Image,'im')
  html=""
  if ( data.entry.Image ) {
    html+=  '<div class="col-sm-4 col-md-4" >'
    html+='<div class="thumbnail" style="min-height:360px">'
    html+='<img style="max-height:164px;min-height:90px" src="/img/catagories/'
    html+= data.entry.Image
    html+='" alt="...">'
  } else {
    html+=  '<div class="col-sm-4 col-md-4" >'
    html+='<div class="thumbnail" style="min-height:260px">'
  }
  html+='<div class="caption">'
  html+='<h3>'
  html+=data.entry.description
  html+='</h3>'
  html+='<p>Click to view site details on <strong>'
  html+=data.entry.description
  html+='</strong></p>'
  html+='<p style="text-align:right">'
  html+='<div style="text-align:right;position:absolute;bottom:25px">'
  html+='<button type="button" class="btn btn-primary" id="' + data.elementID + '" onclick="viewCatagory(this.id);">View</button></p>'
  html+='</div>'
  html+='</div>'
  html+='</div>'
  html+='</div>'
  return  html
}

function viewCatagory(id){
  $('#jstree').jstree(true)
  .deselect_all(id);


  $('#jstree').jstree(true)
  .select_node(id);

}


</script>